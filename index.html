<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OneStop è®¢ç¥¨ â€” æœºç¥¨ + é…’åº— + é«˜é“/ç«è½¦</title>
  <meta name="description" content="äº¤äº’å¼ç¤ºä¾‹è®¢ç¥¨ç½‘ç«™ï¼šæœºç¥¨ã€é…’åº—å’Œé«˜é“/ç«è½¦é¢„è®¢ï¼Œå¸¦å›¾ç‰‡ä¸ç¤ºä¾‹æ¡ç›®ï¼Œæ”¯æŒæœ¬åœ°é¢„è®¢æ¨¡æ‹Ÿã€‚"/>
  <style>
    /* ---------- åŸºç¡€é‡ç½® ---------- */
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Helvetica Neue", Arial; background:#f6f7fb;color:#0f1724}
    a{color:inherit}

    /* ---------- é¡¶éƒ¨å¯¼èˆª ---------- */
    header{background:white;box-shadow:0 3px 12px rgba(15,23,36,0.06);position:sticky;top:0;z-index:50}
    .container{max-width:1100px;margin:0 auto;padding:18px}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#6366f1,#06b6d4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    .brand h1{font-size:18px;margin:0}

    /* ---------- ç”¨æˆ·å¡ ---------- */
    .user-card{display:flex;align-items:center;gap:10px}
    .avatar{width:44px;height:44px;border-radius:999px;background:#c7d2fe;display:flex;align-items:center;justify-content:center;font-weight:600}
    .user-info{font-size:13px}
    .user-info b{display:block}

    /* ---------- ä¸»ä½“å¸ƒå±€ ---------- */
    main{max-width:1100px;margin:24px auto;padding:0 18px}
    .panel{display:grid;grid-template-columns:280px 1fr;gap:20px;align-items:start;}

    /* å·¦ä¾§èœå• */
    .side{background:white;padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06); position:sticky; top: 100px;}
    .tabs{display:flex;flex-direction:column;gap:8px}
    .tab-btn{padding:10px 12px;border-radius:8px;border:1px solid transparent;cursor:pointer;background:transparent;text-align:left; font-size: 15px;}
    .tab-btn.active{background:linear-gradient(90deg,#eef2ff,#ecfeff);border-color:#e6eefc; color: #4f46e5; font-weight: 600;}

    /* ä¸»è¦åŒºåŸŸ */
    .content{min-height:60vh}
    .search-bar{background:white;padding:16px;border-radius:12px;display:flex;gap:12px;align-items:center;box-shadow:0 6px 18px rgba(2,6,23,0.04)}
    .search-field{flex:1;display:flex;gap:8px}
    .search-field input,.search-field select{padding:10px;border-radius:8px;border:1px solid #e6edf3;width:100%}
    .search-actions{display:flex;gap:8px}
    .btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer; font-weight: 600;}
    .btn.primary{background:linear-gradient(90deg,#6366f1,#06b6d4);color:white}
    .btn.ghost{background:white;border:1px solid #e2e8f0}

    /* åˆ—è¡¨ä¸å¡ç‰‡ */
    .list{margin-top:18px;display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
    .card{background:white;border-radius:12px;overflow:hidden;box-shadow:0 10px 24px rgba(2,6,23,0.06);display:flex;flex-direction:column; transition: transform 0.2s ease, box-shadow 0.2s ease;}
    .card:hover{transform: translateY(-4px); box-shadow: 0 12px 28px rgba(2,6,23,0.1);}
    .card img{width:100%;height:150px;object-fit:cover}
    .card .body{padding:12px;flex:1;display:flex;flex-direction:column}
    .card h3{margin:0;font-size:16px}
    .meta{font-size:13px;color:#475569;margin-top:6px}
    .card .actions{display:flex;gap:8px;margin-top:12px}

    /* ç‰¹è‰²æ¨ªå¹… */
    .hero{background:linear-gradient(90deg,#eef2ff,#ecfeff);padding:18px;border-radius:12px;display:flex;gap:12px;align-items:center}
    .hero img{width:160px;height:100px;object-fit:cover;border-radius:8px}

    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:100}
    .modal{background:white;border-radius:12px;max-width:760px;width:100%;overflow:hidden}
    .modal .modal-body{display:flex;gap:12px}
    .modal .modal-body img{width:260px;height:180px;object-fit:cover}
    .modal .modal-content{padding:18px}

    /* é¢„è®¢æˆåŠŸæç¤º */
    .toast{position:fixed;right:20px;bottom:20px;background:#0f1724;color:white;padding:12px 16px;border-radius:10px;display:none;z-index:110}

    /* å“åº”å¼ */
    @media (max-width:880px){.panel{grid-template-columns:1fr}.side{order:2; position: static;}.search-bar{flex-direction:column;align-items:stretch}.modal .modal-body{flex-direction:column}.modal .modal-body img{width:100%}}
  </style>
</head>
<body>

<header>
  <div class="container nav">
    <div class="brand">
      <div class="logo">OS</div>
      <div>
        <h1>OneStop è®¢ç¥¨</h1>
        <div style="font-size:12px;color:#475569">ä¸€ç«™å¼é¢„è®¢ï¼šæœºç¥¨ Â· é…’åº— Â· é«˜é“/ç«è½¦</div>
      </div>
    </div>

    <div class="user-card">
      <div class="avatar" id="avatar">D</div>
      <div class="user-info">
        <b id="username">doraemon</b>
        <div id="useremail">doraemon@gmail.com</div>
      </div>
      <button class="btn ghost" onclick="openOrdersModal()">æˆ‘çš„è®¢å•</button>
    </div>
  </div>
</header>

<main>
  <div class="panel">
    <aside class="side">
      <div style="font-weight:700;margin-bottom:8px">å¿«é€Ÿå¯¼èˆª</div>
      <div class="tabs">
        <button class="tab-btn active" data-tab="flights" onclick="switchTab('flights', this)">âœˆï¸ æœºç¥¨</button>
        <button class="tab-btn" data-tab="hotels" onclick="switchTab('hotels', this)">ğŸ¨ é…’åº—</button>
        <button class="tab-btn" data-tab="trains" onclick="switchTab('trains', this)">ğŸš„ é«˜é“ / ç«è½¦</button>
        <button class="tab-btn" data-tab="deals" onclick="switchTab('deals', this)">ğŸ”¥ ä»Šæ—¥ç‰¹æƒ </button>
      </div>

      <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid #f1f5f9;">
        <h3 style="margin-top:0; font-size: 16px;">å…³äº OneStop</h3>
        <p style="color:#475569; line-height: 1.7; font-size: 14px; margin-bottom: 0;">
          OneStop è®¢ç¥¨å¹³å°è‡´åŠ›äºä¸ºæ‚¨æä¾›æ— ç¼ã€é«˜æ•ˆçš„ä¸€ç«™å¼æ—…è¡Œé¢„è®¢ä½“éªŒã€‚æˆ‘ä»¬æ•´åˆäº†å…¨çƒæ•°åƒå®¶èˆªç©ºå…¬å¸çš„å®æ—¶æ•°æ®ã€è¦†ç›–ä¸»è¦åŸå¸‚çš„ä¼˜è´¨é…’åº—ç½‘ç»œï¼Œä»¥åŠå›½å®¶é«˜é“ç³»ç»Ÿï¼Œè®©æ‚¨è½»æ¾è§„åˆ’ä»æœºç¥¨ã€ä½å®¿åˆ°åœ°é¢äº¤é€šçš„æ¯ä¸€ä¸ªç¯èŠ‚ã€‚
        </p>
      </div>
    </aside>

    <section class="content">
      <div class="hero">
        <div style="flex:1">
          <h2 style="margin:0">æ¢ç´¢ä¸‹ä¸€æ¬¡æ—…è¡Œ</h2>
          <div style="color:#475569;margin-top:8px">æœç´¢æœºç¥¨ã€é…’åº—æˆ–é«˜é“ï¼ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å¹¶å®Œæˆé¢„è®¢ã€‚</div>
        </div>
        <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=800&q=60" alt="travel-hero">
      </div>

      <div id="searchFlights" class="search-bar" style="margin-top:14px">
        <div class="search-field">
          <input id="from" placeholder="å‡ºå‘åœ°ï¼ˆåŸå¸‚æˆ–æœºåœºï¼‰" value="åŒ—äº¬ (PEK)" />
          <input id="to" placeholder="ç›®çš„åœ°ï¼ˆåŸå¸‚æˆ–æœºåœºï¼‰" value="ä¸Šæµ· (PVG)" />
          <input id="departDate" type="date" />
          <select id="cabin">
            <option>ç»æµèˆ±</option>
            <option>é«˜çº§ç»æµ</option>
            <option>å•†åŠ¡èˆ±</option>
          </select>
        </div>
        <div class="search-actions">
          <button class="btn ghost" onclick="randomizeFlightSearch()">éšæœºæ¨è</button>
          <button class="btn primary" onclick="filterFlights()">æœç´¢æœºç¥¨</button>
        </div>
      </div>

      <div id="searchHotels" class="search-bar" style="margin-top:14px;display:none">
        <div class="search-field">
          <input id="hotelCity" placeholder="åŸå¸‚ï¼Œä¾‹å¦‚ï¼šä¸Šæµ·" />
          <input id="checkin" type="date" />
          <input id="checkout" type="date" />
          <select id="rooms"><option>1 é—´</option><option>2 é—´</option></select>
        </div>
        <div class="search-actions">
          <button class="btn ghost" onclick="randomizeHotelSearch()">ç»™æˆ‘æƒŠå–œ</button>
          <button class="btn primary" onclick="filterHotels()">æœç´¢é…’åº—</button>
        </div>
      </div>

      <div id="searchTrains" class="search-bar" style="margin-top:14px;display:none">
        <div class="search-field">
          <input id="trainFrom" placeholder="å‡ºå‘ç«™" />
          <input id="trainTo" placeholder="åˆ°è¾¾ç«™" />
          <input id="trainDate" type="date" />
          <select id="seatClass"><option>äºŒç­‰åº§</option><option>ä¸€ç­‰åº§</option><option>å•†åŠ¡åº§</option></select>
        </div>
        <div class="search-actions">
          <button class="btn ghost" onclick="randomizeTrainSearch()">é™„è¿‘çƒ­é—¨</button>
          <button class="btn primary" onclick="filterTrains()">æœç´¢è½¦ç¥¨</button>
        </div>
      </div>

      <div id="tabContent" style="margin-top:16px">
        <div id="flights" class="tab-pane">
          <div style="display:flex;gap:14px;align-items:center;justify-content:space-between">
            <h3>çƒ­é—¨æœºç¥¨æ¨è</h3>
            <div style="color:#475569;font-size:13px">å…± <span id="flightCount">0</span> æ¡ç»“æœ</div>
          </div>
          <div class="list" id="flightList"></div>
        </div>
        <div id="hotels" class="tab-pane" style="display:none">
          <div style="display:flex;gap:14px;align-items:center;justify-content:space-between">
            <h3>ç²¾é€‰é…’åº—</h3>
            <div style="color:#475569;font-size:13px">å…± <span id="hotelCount">0</span> å®¶</div>
          </div>
          <div class="list" id="hotelList"></div>
        </div>
        <div id="trains" class="tab-pane" style="display:none">
          <div style="display:flex;gap:14px;align-items:center;justify-content:space-between">
            <h3>é«˜é“ / ç«è½¦è½¦æ¬¡</h3>
            <div style="color:#475569;font-size:13px">å…± <span id="trainCount">0</span> æ¡</div>
          </div>
          <div class="list" id="trainList"></div>
        </div>
        <div id="deals" class="tab-pane" style="display:none">
          <h3>ä»Šæ—¥ç‰¹æƒ </h3>
          <div class="list" id="dealList"></div>
        </div>
      </div>
      
    </section>
  </div>
</main>

<div class="modal-backdrop" id="modalBackdrop">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-body">
      <img id="modalImg" src="" alt="item image">
      <div class="modal-content">
        <h2 id="modalTitle">æ ‡é¢˜</h2>
        <div id="modalMeta" class="meta"></div>
        <p id="modalDesc" style="margin-top:10px;color:#475569">è¯¦ç»†æè¿°</p>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="btn primary" id="bookNowBtn">ç«‹å³é¢„è®¢</button>
          <button class="btn ghost" onclick="closeModal()">å–æ¶ˆ</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal-backdrop" id="ordersModalBackdrop">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="ordersModalTitle">
        <div class="modal-content" style="padding: 24px;">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <h2 id="ordersModalTitle" style="margin:0;">æˆ‘çš„è®¢å•</h2>
                <button class="btn ghost" onclick="closeOrdersModal()">å…³é—­</button>
            </div>
            <div id="ordersList" style="margin-top: 18px; max-height: 60vh; overflow-y: auto;">
                </div>
        </div>
    </div>
</div>


<div class="toast" id="toast">å·²åŠ å…¥è®¢å•</div>

<script>
// ---------- ç¤ºä¾‹æ•°æ®ï¼ˆåŒ…å«å›¾ç‰‡ã€æ–‡å­—ç¤ºä¾‹ï¼‰ ----------
const sampleFlights = [
  {id: 'F001', from:'åŒ—äº¬ (PEK)', to:'ä¸Šæµ· (PVG)', depart:'2025-09-20 09:20', arrive:'2025-09-20 11:10', duration:'1h50m', price:520, airline:'ä¸­å›½å›½èˆª', img:'https://pic.c-ctrip.com/flight/fuzzy/HET/640.jpg', desc:'æ—©ç­ç›´é£ï¼Œå«å…è´¹è¡Œæ1ä»¶ï¼Œé€‚åˆå•†åŠ¡ä¸çŸ­é€”å‡ºè¡Œã€‚'},
  {id:'F002', from:'å¹¿å· (CAN)', to:'æˆéƒ½ (CTU)', depart:'2025-10-02 13:45', arrive:'2025-10-02 16:00', duration:'2h15m', price:420, airline:'å—æ–¹èˆªç©º', img:'https://pic.c-ctrip.com/flight/fuzzy/DSN/640.jpg', desc:'ä¸‹åˆå‡ºè¡Œï¼Œç»æµèˆ±ç‰¹ä»·ï¼Œå¯é€‰æ‹©æå‰é€‰åº§ã€‚'},
  {id:'F003', from:'æ·±åœ³ (SZX)', to:'é¦™æ¸¯ (HKG)', depart:'2025-09-28 18:00', arrive:'2025-09-28 19:00', duration:'1h0m', price:300, airline:'é¦™æ¸¯èˆªç©º', img:'https://pic.c-ctrip.com/flight/fuzzy/CIF/640.jpg', desc:'çŸ­é€”è·¨å¢ƒèˆªçº¿ï¼Œèˆªç­é¢‘ç¹ï¼Œé€‚åˆå‘¨æœ«å‡ºè¡Œã€‚'},
  {id:'F004', from:'ä¸Šæµ· (PVG)', to:'ä¸œäº¬ (NRT)', depart:'2025-11-05 08:30', arrive:'2025-11-05 12:00', duration:'3h30m', price:1800, airline:'æ—¥æœ¬èˆªç©º', img:'https://pic.c-ctrip.com/flight/fuzzy/TGO/640.jpg', desc:'å«é¤é£Ÿä¸å¨±ä¹ç³»ç»Ÿï¼Œé€‚åˆåº¦å‡å‡ºè¡Œã€‚'},
  {id:'F005', from:'åŒ—äº¬ (PEK)', to:'æ­å· (HGH)', depart:'2025-09-30 07:00', arrive:'2025-09-30 08:10', duration:'1h10m', price:450, airline:'ä¸œæ–¹èˆªç©º', img:'https://pic.c-ctrip.com/flight/fuzzy/NGB/640.jpg', desc:'æ—©æ™¨èˆªç­ï¼ŒèŠ‚çœæ—¶é—´ï¼Œå«å¿«é€Ÿå®‰æ£€é€šé“ã€‚'}
];

const sampleHotels = [
  {id:'H001', name:'æµ¦ä¸œå‡¯æ‚¦é…’åº—', city:'ä¸Šæµ·', price:950, rating:4.7, img:'https://dimg04.c-ctrip.com/images/0205z12000ds9olohCCF6_R_300_225_R5_Q70_D.jpg', desc:'æµ¦ä¸œæ»¨æ±Ÿè±ªåé…’åº—ï¼Œé è¿‘åœ°é“ä¸ä¼šå±•ä¸­å¿ƒï¼Œå«æ—©é¤ã€‚'},
  {id:'H002', name:'æ¹¾åŒºç²¾å“é…’åº—', city:'æ·±åœ³', price:420, rating:4.3, img:'https://dimg04.c-ctrip.com/images/1mc0i12000noxzra99523_R_300_225_R5_Q70_D.jpg', desc:'è®¾è®¡æ„Ÿå¼ºçš„å°ä¼—ç²¾å“é…’åº—ï¼Œé€‚åˆæ‹ç…§ä¸æƒ…ä¾£å‡ºæ¸¸ã€‚'},
  {id:'H003', name:'é”¦æ±Ÿä¹‹æ˜Ÿç»æµå‹', city:'åŒ—äº¬', price:220, rating:3.9, img:'https://dimg04.c-ctrip.com/images/1mc0i12000noxzra99523_R_300_225_R5_Q70_D.jpg', desc:'æ€§ä»·æ¯”é«˜ï¼Œä½ç½®ä¾¿åˆ©ï¼Œé€‚åˆå•†åŠ¡å·®æ—…ã€‚'},
  {id:'H004', name:'æ—¥å¼æ¸©æ³‰é…’åº—', city:'ä¸œäº¬', price:1280, rating:4.8, img:'https://dimg04.c-ctrip.com/images/1mc3t12000g7nhpenDA01_R_300_225_R5_Q70_D.jpg', desc:'æ­£å®—æ¸©æ³‰ä½“éªŒï¼Œå¸¦ç§äººæ¸©æ³‰æ± å’Œä¼ ç»Ÿæ–™ç†ã€‚'},
  {id:'H005', name:'æµ·æ™¯åº¦å‡æ‘', city:'ä¸‰äºš', price:1500, rating:4.9, img:'https://dimg04.c-ctrip.com/images/0203v12000a29gwut7FC9_R_300_225_R5_Q70_D.jpg', desc:'é¢å‘å¤§æµ·çš„ç§äººæµ·æ»©ï¼Œé€‚åˆå®¶åº­åº¦å‡ã€‚'}
];

const sampleTrains = [
  {id:'T001', from:'åŒ—äº¬å—', to:'ä¸Šæµ·è™¹æ¡¥', depart:'2025-09-22 07:00', arrive:'2025-09-22 12:30', duration:'5h30m', price:553, type:'é«˜é“Gå­—', img:'https://pic.c-ctrip.com/railway_v2/zzz_236152.jpg', desc:'é«˜é“Gå­—å¤´ï¼Œå•†åŠ¡ä¸€ç­‰äºŒç­‰åº§å¯é€‰ï¼Œé€Ÿåº¦å¿«ã€‚'},
  {id:'T002', from:'å¹¿å·å—', to:'æ·±åœ³åŒ—', depart:'2025-09-25 18:30', arrive:'2025-09-25 19:20', duration:'0h50m', price:76, type:'é«˜é“Då­—', img:'https://pic.c-ctrip.com/railway_v2/zzz_236152_2.jpg', desc:'çŸ­é€”é€šå‹¤é«˜é“ï¼Œç­æ¬¡é¢‘ç¹ï¼Œé€‚åˆå•†åŠ¡å’Œæ—¥å¸¸å‡ºå·®ã€‚'},
  {id:'T003', from:'æ­å·ä¸œ', to:'å—äº¬å—', depart:'2025-10-01 09:10', arrive:'2025-10-01 10:40', duration:'1h30m', price:128, type:'åŠ¨è½¦', img:'https://pic.c-ctrip.com/railway_v2/zzz_236152_3.jpg', desc:'åŠ¨è½¦ç»„åˆ—è½¦ï¼Œé€Ÿåº¦ç¨³å®šï¼Œé€‚åˆå‘¨æœ«çŸ­é€”ã€‚'},
  {id:'T004', from:'æˆéƒ½ä¸œ', to:'é‡åº†åŒ—', depart:'2025-11-03 14:25', arrive:'2025-11-03 16:10', duration:'1h45m', price:99, type:'åŠ¨è½¦', img:'https://dimg04.c-ctrip.com/images/0300a12000cvcziegB378_C_210_118_Q100.jpg', desc:'é«˜é“ç½‘ç»œè¦†ç›–ï¼Œå«å……ç”µæ’åº§ä¸å…è´¹WiFiã€‚'},
  {id:'T005', from:'åŒ—äº¬è¥¿', to:'è¥¿å®‰åŒ—', depart:'2025-09-29 20:00', arrive:'2025-09-30 02:30', duration:'6h30m', price:420, type:'åŠ¨å§/å¤œé—´', img:'https://dimg04.c-ctrip.com/images/0300a12000cvcziegB378_C_210_118_Q100.jpg', desc:'å¤œç­è½¦ï¼Œå¯é€‰å§é“ºï¼ŒèŠ‚çœç™½å¤©æ—¶é—´ã€‚'}
];

const sampleDeals = [
  {id:'D001', title:'å‘¨æœ«ç‰¹æƒ ï¼šåŒ—äº¬â€”ä¸Šæµ·å¾€è¿” 799å…ƒèµ·', img:'https://dimg04.c-ctrip.com/images/0205z12000ds9olohCCF6_R_300_225_R5_Q70_D.jpg', desc:'é™æ—¶ä¿ƒé”€ï¼Œåº§ä½æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—ã€‚'},
  {id:'D002', title:'ä¸‰äºšæµ·æ™¯åº¦å‡ï¼šä¹°2æ™šé€1æ™š', img:'https://dimg04.c-ctrip.com/images/1mc0i12000noxzra99523_R_300_225_R5_Q70_D.jpg', desc:'é€‚ç”¨æŒ‡å®šæ—¥æœŸï¼Œéœ€æå‰é¢„è®¢ã€‚'},
  {id:'D003', title:'ä¸œäº¬é…’åº—å¥—é¤ï¼š4å¤©3æ™šæœº+é…’ 2999å…ƒ', img:'https://dimg04.c-ctrip.com/images/1mc3t12000g7nhpenDA01_R_300_225_R5_Q70_D.jpg', desc:'åŒ…å«å¾€è¿”æœºç¥¨ä¸å¸‚ä¸­å¿ƒä¸‰æ˜Ÿçº§é…’åº—ï¼Œæ€§ä»·æ¯”ä¹‹é€‰ã€‚'},
  {id:'D004', title:'é«˜é“åŠ¨å§ä¸“äº«ï¼šå¤œé—´å§é“º8æŠ˜ä¼˜æƒ ', img:'https://pic.c-ctrip.com/railway_v2/zzz_236152_2.jpg', desc:'é¢„è®¢åŒ—äº¬è‡³è¥¿å®‰çš„å¤œé—´åŠ¨å§è½¦ç¥¨ï¼Œäº«å—ä¸“å±æŠ˜æ‰£ï¼ŒèŠ‚çœæ—¶é—´å’Œä½å®¿è´¹ã€‚'},
  {id:'D005', title:'æˆéƒ½ç¾é£Ÿæ¢ç´¢ï¼šé…’åº—+ç†ŠçŒ«åŸºåœ°é—¨ç¥¨', img:'https://dimg04.c-ctrip.com/images/0300a12000cvcziegB378_C_210_118_Q100.jpg', desc:'å…¥ä½ç²¾å“é…’åº—ï¼Œèµ é€ç†ŠçŒ«åŸºåœ°é—¨ç¥¨ä¸¤å¼ ï¼Œä½“éªŒå¤©åºœä¹‹å›½çš„é­…åŠ›ã€‚'}
];

// ---------- æ¸²æŸ“å‡½æ•° ----------
function $(id){return document.getElementById(id)}

function renderFlights(list){
  const container = $('flightList'); container.innerHTML='';
  list.forEach(f=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${f.img}" alt="flight image">
      <div class="body">
        <h3>${f.from} â†’ ${f.to}</h3>
        <div class="meta">${f.airline} â€¢ ${f.depart} â†’ ${f.arrive} â€¢ ${f.duration}</div>
        <div style="margin-top:auto;display:flex;align-items:center;justify-content:space-between">
          <div style="font-weight:700">Â¥${f.price}</div>
          <div class="actions">
            <button class="btn ghost" onclick='viewDetails(${JSON.stringify(f)})'>æŸ¥çœ‹è¯¦æƒ…</button>
            <button class="btn primary" onclick='bookItem(${JSON.stringify(f)})'>é¢„è®¢</button>
          </div>
        </div>
      </div>`;
    container.appendChild(card);
  });
  $('flightCount').innerText = list.length;
}

function renderHotels(list){
  const container = $('hotelList'); container.innerHTML='';
  list.forEach(h=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${h.img}" alt="hotel image">
      <div class="body">
        <h3>${h.name}</h3>
        <div class="meta">${h.city} â€¢ è¯„åˆ† ${h.rating} â€¢ èµ· Â¥${h.price}</div>
        <div style="margin-top:auto;display:flex;align-items:center;justify-content:space-between">
          <div class="actions">
            <button class="btn ghost" onclick='viewDetails(${JSON.stringify(h)})'>æŸ¥çœ‹</button>
            <button class="btn primary" onclick='bookItem(${JSON.stringify(h)})'>é¢„è®¢</button>
          </div>
        </div>
      </div>`;
    container.appendChild(card);
  });
  $('hotelCount').innerText = list.length;
}

function renderTrains(list){
  const container = $('trainList'); container.innerHTML='';
  list.forEach(t=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${t.img}" alt="train image">
      <div class="body">
        <h3>${t.from} â†’ ${t.to}</h3>
        <div class="meta">${t.type} â€¢ ${t.depart} â†’ ${t.arrive} â€¢ ${t.duration}</div>
        <div style="margin-top:auto;display:flex;align-items:center;justify-content:space-between">
          <div style="font-weight:700">Â¥${t.price}</div>
          <div class="actions">
            <button class="btn ghost" onclick='viewDetails(${JSON.stringify(t)})'>è¯¦æƒ…</button>
            <button class="btn primary" onclick='bookItem(${JSON.stringify(t)})'>é¢„è®¢</button>
          </div>
        </div>
      </div>`;
    container.appendChild(card);
  });
  $('trainCount').innerText = list.length;
}

function renderDeals(list){
  const container = $('dealList'); container.innerHTML='';
  list.forEach(d=>{
    const card = document.createElement('div'); card.className='card';
    card.innerHTML = `
      <img src="${d.img}" alt="deal image">
      <div class="body">
        <h3>${d.title}</h3>
        <div class="meta">${d.desc}</div>
        <div style="margin-top:auto;display:flex;align-items:center;justify-content:flex-end">
          <button class="btn primary" onclick='viewDetails(${JSON.stringify(d)})'>æŸ¥çœ‹å¹¶æŠ¢è´­</button>
        </div>
      </div>`;
    container.appendChild(card);
  });
}

// åˆå§‹æ¸²æŸ“
renderFlights(sampleFlights);
renderHotels(sampleHotels);
renderTrains(sampleTrains);
renderDeals(sampleDeals);

// ---------- äº¤äº’é€»è¾‘ ----------
let currentTab = 'flights';
function switchTab(tab, el){
  currentTab = tab;
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  if(el) el.classList.add('active');
  ['flights','hotels','trains','deals'].forEach(t=>{
    const searchBarId = 'search' + capitalize(t);
    if ($(searchBarId)) {
        $(searchBarId).style.display = (t === tab && t !== 'deals') ? 'flex' : 'none';
    }
    $(t).style.display = (t===tab) ? 'block' : 'none';
  });
}

function capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)}

function viewDetails(item){
  $('modalImg').src = item.img || '';
  $('modalTitle').innerText = (item.title || (item.name || (item.from + ' â†’ ' + item.to)));
  $('modalMeta').innerText = item.airline ? `${item.airline} â€¢ Â¥${item.price}` : (item.city ? `${item.city} â€¢ Â¥${item.price}` : (item.type ? `${item.type} â€¢ Â¥${item.price}` : ''));
  $('modalDesc').innerText = item.desc || 'æ— æ›´å¤šæè¿°ã€‚';
  $('bookNowBtn').onclick = ()=>bookItem(item);
  openModal();
}

function openModal(){ $('modalBackdrop').style.display='flex'; }
function closeModal(){ $('modalBackdrop').style.display='none'; }

function bookItem(item){
  const orders = JSON.parse(localStorage.getItem('os_orders')||'[]');
  const order = {id: item.id || ('X'+Date.now()), type: currentTab, title: item.title || item.name || (item.from+' â†’ '+item.to), price: item.price || 0, time: new Date().toISOString()};
  orders.push(order);
  localStorage.setItem('os_orders', JSON.stringify(orders));
  showToast('å·²åŠ å…¥è®¢å•ï¼š' + order.title);
  closeModal();
}

function showToast(text){
  const t = $('toast'); t.innerText = text; t.style.display='block';
  setTimeout(()=>{t.style.display='none'},2500);
}

// --- æˆ‘çš„è®¢å•äº¤äº’ ---
function openOrdersModal() {
    const orders = JSON.parse(localStorage.getItem('os_orders') || '[]');
    const container = $('ordersList');
    container.innerHTML = '';

    if (!orders.length) {
        container.innerHTML = '<p style="color:#475569;text-align:center;margin-top:20px;">æš‚æ— æœ¬åœ°æ¨¡æ‹Ÿè®¢å•ã€‚</p>';
    } else {
        orders.forEach((o, index) => {
            const orderEl = document.createElement('div');
            orderEl.style = 'display:flex; justify-content:space-between; align-items:center; padding: 12px 0; border-bottom: 1px solid #f1f5f9;';
            orderEl.innerHTML = `
                <div>
                    <b style="font-size:15px;">[${o.type.replace('s', '').toUpperCase()}] ${o.title}</b>
                    <div style="font-size:13px; color:#475569; margin-top:4px;">
                        ä»·æ ¼ï¼šÂ¥${o.price} | é¢„è®¢æ—¶é—´ï¼š${new Date(o.time).toLocaleString()}
                    </div>
                </div>
                <button class="btn ghost" style="padding: 6px 10px; border-color: #ef4444; color: #ef4444;" onclick="removeBooking(${index})">å–æ¶ˆè®¢å•</button>
            `;
            container.appendChild(orderEl);
        });
    }
    $('ordersModalBackdrop').style.display = 'flex';
}

function closeOrdersModal() {
    $('ordersModalBackdrop').style.display = 'none';
}

function removeBooking(index) {
    if (confirm('ç¡®å®šè¦å–æ¶ˆè¿™ä¸ªè®¢å•å—ï¼Ÿ')) {
        let orders = JSON.parse(localStorage.getItem('os_orders') || '[]');
        orders.splice(index, 1);
        localStorage.setItem('os_orders', JSON.stringify(orders));
        showToast('è®¢å•å·²å–æ¶ˆ');
        openOrdersModal(); 
    }
}

// ç®€å•æœç´¢è¿‡æ»¤
function filterFlights(){
  const from = $('from').value.toLowerCase(); const to = $('to').value.toLowerCase();
  const filtered = sampleFlights.filter(f=> f.from.toLowerCase().includes(from) && f.to.toLowerCase().includes(to));
  renderFlights(filtered.length?filtered:sampleFlights);
}
function filterHotels(){ const city = $('hotelCity').value.toLowerCase(); const filtered = sampleHotels.filter(h=>h.city.toLowerCase().includes(city)); renderHotels(filtered.length?filtered:sampleHotels); }
function filterTrains(){ const from = $('trainFrom').value.toLowerCase(); const to = $('trainTo').value.toLowerCase(); const filtered = sampleTrains.filter(t=>t.from.toLowerCase().includes(from) && t.to.toLowerCase().includes(to)); renderTrains(filtered.length?filtered:sampleTrains); }

// éšæœºæ¨èåŠŸèƒ½
function randomizeFlightSearch(){ const idx = Math.floor(Math.random()*sampleFlights.length); viewDetails(sampleFlights[idx]); }
function randomizeHotelSearch(){ const idx = Math.floor(Math.random()*sampleHotels.length); viewDetails(sampleHotels[idx]); }
function randomizeTrainSearch(){ const idx = Math.floor(Math.random()*sampleTrains.length); viewDetails(sampleTrains[idx]); }

// é¡µé¢åŠ è½½æ—¶è®¾é»˜è®¤æ—¥æœŸä¸ºä»Šå¤©
window.addEventListener('load', ()=>{
  const today = new Date().toISOString().slice(0,10);
  if($('departDate')) $('departDate').value = today;
  if($('checkin')) $('checkin').value = today;
  if($('checkout')) {$('checkout').value = new Date(Date.now()+86400000).toISOString().slice(0,10)}
  if($('trainDate')) $('trainDate').value = today;
});

</script>

</body>
</html>